<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Newsreader Panel</title>
    <style>
      body { font-family: Arial, sans-serif; width: 420px; margin: 0; padding: 12px; }
      label { display: block; margin-top: 8px; font-size: 12px; }
      input { width: 100%; padding: 6px; margin-top: 4px; }
      button { width: 100%; padding: 8px; margin-top: 10px; }
      .row { margin-top: 8px; }
      .status { margin-top: 8px; font-size: 12px; color: #444; }
      .preview { margin-top: 10px; border: 1px solid #ddd; border-radius: 6px; padding: 8px; }
      .preview-header { display: flex; justify-content: space-between; align-items: center; gap: 8px; }
      .preview-actions { display: flex; gap: 6px; }
      .preview-actions button { width: auto; margin-top: 0; padding: 4px 8px; font-size: 11px; }
      .preview-list { max-height: 240px; overflow: auto; margin-top: 8px; }
      .preview-item { border-top: 1px solid #eee; padding: 6px 0; display: grid; grid-template-columns: 20px 1fr; gap: 6px; }
      .preview-item:first-child { border-top: none; }
      .preview-item input[type="checkbox"] { margin-top: 4px; }
      .preview-fields { display: grid; gap: 4px; }
      .preview-title { width: 100%; }
      .preview-url { width: 100%; font-size: 11px; color: #444; }
      .preview-controls { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; }
      .preview-controls button { margin-top: 6px; }
      .log-actions { display: flex; gap: 8px; margin-top: 6px; }
      .log-actions button { width: auto; flex: 1; padding: 6px; }
      textarea { width: 100%; height: 220px; margin-top: 8px; font-family: Consolas, monospace; font-size: 11px; }
      .hint { font-size: 11px; color: #555; margin-top: 4px; }
    </style>
  </head>
  <body>
    <h3>Newsreader Control Panel</h3>
    <div class="hint">This panel stays open for troubleshooting.</div>
    <label>Host URL
      <input id="host" placeholder="http://localhost:8000" />
    </label>
    <label>Book ID
      <input id="bookId" placeholder="1" />
    </label>
    <label>
      <input type="checkbox" id="bulkCapture" />
      Bulk capture snapshot items
    </label>
    <label>
      <input type="checkbox" id="useMobileUA" />
      Use iPhone-style mobile view for WSJ capture
    </label>
    <label>
      <input type="checkbox" id="frontPageOnly" />
      Front page only (filter)
    </label>
    <div class="row">
      <button id="saveConfig">Save Settings</button>
      <button id="updateBook">Preview List</button>
      <button id="sendArticle">Send Article</button>
      <button id="buildIssue">Build Today&apos;s Issue</button>
    </div>
    <div class="preview-controls">
      <button id="saveSnapshot" disabled>Save Snapshot</button>
      <button id="bulkCaptureSelected" disabled>Bulk Capture Selected</button>
    </div>
    <div class="preview">
      <div class="preview-header">
        <strong>Snapshot Preview</strong>
        <div class="preview-actions">
          <button id="selectAll" type="button">Select All</button>
          <button id="selectNone" type="button">Select None</button>
        </div>
      </div>
      <div class="status" id="previewCount">No preview loaded.</div>
      <div class="preview-list" id="previewList"></div>
    </div>
    <div class="status" id="status"></div>
    <div class="row">
      <strong>Logs</strong>
      <div class="log-actions">
        <button id="refreshLogs">Refresh Logs</button>
        <button id="clearLogs">Clear Logs</button>
      </div>
      <textarea id="logs" readonly></textarea>
    </div>
    <script src="popup.js"></script>
  </body>
</html>
